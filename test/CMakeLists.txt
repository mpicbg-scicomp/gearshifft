
include_directories(${CMAKE_CURRENT_SOURCE_DIR}/../inc)

if(CUDA_FOUND)
  set(TEST_EXEC test_cufft)
  add_executable(${TEST_EXEC} test_cufft.cpp)
  set(LIBS ${CUDA_LIBRARIES} ${CUDA_CUFFT_LIBRARIES})
  target_compile_definitions(${TEST_EXEC} PUBLIC -DBOOST_TEST_DYN_LINK)
  target_link_libraries(${TEST_EXEC} ${Boost_LIBRARIES} ${LIBS})
  add_test(NAME ${TEST_EXEC} COMMAND ${TEST_EXEC})
endif()

if(CLFFT_FOUND)
  set(TEST_EXEC test_clfft)
  add_executable(${TEST_EXEC} test_clfft.cpp)
  set(LIBS ${CLFFT_LIBRARIES} ${OpenCL_LIBRARIES})
  target_link_libraries(${TEST_EXEC} ${Boost_LIBRARIES} ${LIBS})
  target_compile_definitions(${TEST_EXEC} PUBLIC -DBOOST_TEST_DYN_LINK)
  add_test(NAME ${TEST_EXEC} COMMAND ${TEST_EXEC})

  set(TEST_EXEC test_clfft_global_fixture)
  add_executable(${TEST_EXEC} test_clfft_global_fixture.cpp)
  set(LIBS ${CLFFT_LIBRARIES} ${OpenCL_LIBRARIES})
  target_link_libraries(${TEST_EXEC} ${Boost_LIBRARIES} ${LIBS})
  target_compile_definitions(${TEST_EXEC} PUBLIC -DBOOST_TEST_DYN_LINK)
  add_test(NAME ${TEST_EXEC} COMMAND ${TEST_EXEC})
endif()

if(FFTW_FOUND)
  set(TEST_EXEC test_fftw)
  add_executable(${TEST_EXEC} test_fftw.cpp)
  set(LIBS ${FFTW_LIBRARIES})
  target_link_libraries(${TEST_EXEC} ${LIBS} ${Boost_LIBRARIES})
  target_compile_definitions(${TEST_EXEC} PUBLIC -DBOOST_TEST_DYN_LINK)
  target_compile_definitions(${TEST_EXEC} PUBLIC -DGEARSHIFFT_FFTW_USE_THREADS=${GEARSHIFFT_FFTW_USE_THREADS})

  add_test(NAME ${TEST_EXEC} COMMAND ${TEST_EXEC})
endif()
